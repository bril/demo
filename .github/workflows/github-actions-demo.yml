name: GitHub Actions Demo
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - name: apt update
        run: |
          sudo apt-get update
          sudo apt-get install mingw-w64
      - name: build binutils
        run: |
          wget https://ftp.gnu.org/gnu/binutils/binutils-2.36.1.tar.xz
          tar -xJf binutils-2.36.1.tar.xz
          mkdir binutils-build
          cd binutils-build
          ../binutils-2.36.1/configure --target=arm-none-symbianelf --host=i686-pc-linux-gnu --target=arm-none-symbianelf --prefix=/opt/symbian-cross --disable-nls --enable-obsolete --enable-poison-system-directories
          make all
          make install
      - name: build gcc
        run: |
          wget https://ftp.gnu.org/gnu/gcc/gcc-11.1.0/gcc-11.1.0.tar.xz
          tar -xJf gcc-11.1.0.tar.xz
          mkdir gcc-build
          cd gcc-11.1.0
          ./contrib/download_prerequisites
          cd ../gcc-build
          ../gcc-11.1.0/configure --target=arm-none-symbianelf --host=i686-w64-mingw32 --prefix=/symbian-win --enable-obsolete --with-static-standard-libraries --enable-poison-system-directories
          make all
          make install
      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.3
        with:
          name: gcc-win
          path: /opt/symbian-win
          retention-days: 1
