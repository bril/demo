name: GitHub Actions Demo
on: [push]
jobs:
  windows:
    runs-on: windows-latest
    steps:
#      - name: ninja install
#        run: |
#          choco install --no-progress -y ninja
      - name: build
        shell: cmd
        run: |
          git clone --depth=1 https://github.com/llvm/llvm-project.git 
          cd llvm-project
          mkdir build
          cd build
          cmake ../llvm ^
          -G "Visual Studio 16 2019" ^
          -DCMAKE_BUILD_TYPE=Release ^
          -DLLVM_ENABLE_PROJECTS=clang ^
          -DLLVM_TARGETS_TO_BUILD=ARM ^
          -DLLVM_DEFAULT_TARGET_TRIPLE=arm-none-symbianelf ^
          -DLLVM_INCLUDE_EXAMPLES=OFF ^
          -DLLVM_INCLUDE_TESTS=OFF ^
          -DLLVM_INCLUDE_BENCHMARKS=OFF ^
          -A Win32 ^
          -Thost=x64
          
          cmake --build . --config Release

      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.3
        with:
          name: clang-win
          path: /llvm-project/build/Release
          retention-days: 1
